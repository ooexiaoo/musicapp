/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/mimelib-noiconv";
exports.ids = ["vendor-chunks/mimelib-noiconv"];
exports.modules = {

/***/ "(rsc)/./node_modules/mimelib-noiconv/content-types.js":
/*!*******************************************************!*\
  !*** ./node_modules/mimelib-noiconv/content-types.js ***!
  \*******************************************************/
/***/ ((module) => {

eval("// list of mime types\nmodule.exports = {\n    \"doc\": \"application/msword\",\n    \"docx\": \"application/msword\",\n    \"pdf\": \"application/pdf\",\n    \"rss\": \"application/rss+xml\",\n    \"xls\": \"application/vnd.ms-excel\",\n    \"xlsx\": \"application/vnd.ms-excel\",\n    \"pps\": \"application/vnd.ms-powerpoint\",\n    \"ppt\": \"application/vnd.ms-powerpoint\",\n    \"pptx\": \"application/vnd.ms-powerpoint\",\n    \"odp\": \"application/vnd.oasis.opendocument.presentation\",\n    \"ods\": \"application/vnd.oasis.opendocument.spreadsheet\",\n    \"odt\": \"application/vnd.oasis.opendocument.text\",\n    \"sxc\": \"application/vnd.sun.xml.calc\",\n    \"sxw\": \"application/vnd.sun.xml.writer\",\n    \"au\": \"audio/basic\",\n    \"snd\": \"audio/basic\",\n    \"flac\": \"audio/flac\",\n    \"mid\": \"audio/mid\",\n    \"rmi\": \"audio/mid\",\n    \"m4a\": \"audio/mp4\",\n    \"mp3\": \"audio/mpeg\",\n    \"oga\": \"audio/ogg\",\n    \"ogg\": \"audio/ogg\",\n    \"aif\": \"audio/x-aiff\",\n    \"aifc\": \"audio/x-aiff\",\n    \"aiff\": \"audio/x-aiff\",\n    \"wav\": \"audio/x-wav\",\n    \"gif\": \"image/gif\",\n    \"jpeg\": \"image/jpeg\",\n    \"jpg\": \"image/jpeg\",\n    \"jpe\": \"image/jpeg\",\n    \"png\": \"image/png\",\n    \"tiff\": \"image/tiff\",\n    \"tif\": \"image/tiff\",\n    \"wbmp\": \"image/vnd.wap.wbmp\",\n    \"bmp\": \"image/x-ms-bmp\",\n    \"ics\": \"text/calendar\",\n    \"csv\": \"text/comma-separated-values\",\n    \"css\": \"text/css\",\n    \"htm\": \"text/html\",\n    \"html\": \"text/html\",\n    \"text\": \"text/plain\",\n    \"txt\": \"text/plain\",\n    \"asc\": \"text/plain\",\n    \"diff\": \"text/plain\",\n    \"pot\": \"text/plain\",\n    \"vcf\": \"text/x-vcard\",\n    \"mp4\": \"video/mp4\",\n    \"mpeg\": \"video/mpeg\",\n    \"mpg\": \"video/mpeg\",\n    \"mpe\": \"video/mpeg\",\n    \"ogv\": \"video/ogg\",\n    \"qt\": \"video/quicktime\",\n    \"mov\": \"video/quicktime\",\n    \"avi\": \"video/x-msvideo\",\n    \"zip\": \"application/zip\",\n    \"rar\": \"application/x-rar-compressed\"\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbWltZWxpYi1ub2ljb252L2NvbnRlbnQtdHlwZXMuanMiLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hhaWF1cmNvZGUvLi9ub2RlX21vZHVsZXMvbWltZWxpYi1ub2ljb252L2NvbnRlbnQtdHlwZXMuanM/NDVjMyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBsaXN0IG9mIG1pbWUgdHlwZXNcbm1vZHVsZS5leHBvcnRzID0ge1xuICAgIFwiZG9jXCI6IFwiYXBwbGljYXRpb24vbXN3b3JkXCIsXG4gICAgXCJkb2N4XCI6IFwiYXBwbGljYXRpb24vbXN3b3JkXCIsXG4gICAgXCJwZGZcIjogXCJhcHBsaWNhdGlvbi9wZGZcIixcbiAgICBcInJzc1wiOiBcImFwcGxpY2F0aW9uL3Jzcyt4bWxcIixcbiAgICBcInhsc1wiOiBcImFwcGxpY2F0aW9uL3ZuZC5tcy1leGNlbFwiLFxuICAgIFwieGxzeFwiOiBcImFwcGxpY2F0aW9uL3ZuZC5tcy1leGNlbFwiLFxuICAgIFwicHBzXCI6IFwiYXBwbGljYXRpb24vdm5kLm1zLXBvd2VycG9pbnRcIixcbiAgICBcInBwdFwiOiBcImFwcGxpY2F0aW9uL3ZuZC5tcy1wb3dlcnBvaW50XCIsXG4gICAgXCJwcHR4XCI6IFwiYXBwbGljYXRpb24vdm5kLm1zLXBvd2VycG9pbnRcIixcbiAgICBcIm9kcFwiOiBcImFwcGxpY2F0aW9uL3ZuZC5vYXNpcy5vcGVuZG9jdW1lbnQucHJlc2VudGF0aW9uXCIsXG4gICAgXCJvZHNcIjogXCJhcHBsaWNhdGlvbi92bmQub2FzaXMub3BlbmRvY3VtZW50LnNwcmVhZHNoZWV0XCIsXG4gICAgXCJvZHRcIjogXCJhcHBsaWNhdGlvbi92bmQub2FzaXMub3BlbmRvY3VtZW50LnRleHRcIixcbiAgICBcInN4Y1wiOiBcImFwcGxpY2F0aW9uL3ZuZC5zdW4ueG1sLmNhbGNcIixcbiAgICBcInN4d1wiOiBcImFwcGxpY2F0aW9uL3ZuZC5zdW4ueG1sLndyaXRlclwiLFxuICAgIFwiYXVcIjogXCJhdWRpby9iYXNpY1wiLFxuICAgIFwic25kXCI6IFwiYXVkaW8vYmFzaWNcIixcbiAgICBcImZsYWNcIjogXCJhdWRpby9mbGFjXCIsXG4gICAgXCJtaWRcIjogXCJhdWRpby9taWRcIixcbiAgICBcInJtaVwiOiBcImF1ZGlvL21pZFwiLFxuICAgIFwibTRhXCI6IFwiYXVkaW8vbXA0XCIsXG4gICAgXCJtcDNcIjogXCJhdWRpby9tcGVnXCIsXG4gICAgXCJvZ2FcIjogXCJhdWRpby9vZ2dcIixcbiAgICBcIm9nZ1wiOiBcImF1ZGlvL29nZ1wiLFxuICAgIFwiYWlmXCI6IFwiYXVkaW8veC1haWZmXCIsXG4gICAgXCJhaWZjXCI6IFwiYXVkaW8veC1haWZmXCIsXG4gICAgXCJhaWZmXCI6IFwiYXVkaW8veC1haWZmXCIsXG4gICAgXCJ3YXZcIjogXCJhdWRpby94LXdhdlwiLFxuICAgIFwiZ2lmXCI6IFwiaW1hZ2UvZ2lmXCIsXG4gICAgXCJqcGVnXCI6IFwiaW1hZ2UvanBlZ1wiLFxuICAgIFwianBnXCI6IFwiaW1hZ2UvanBlZ1wiLFxuICAgIFwianBlXCI6IFwiaW1hZ2UvanBlZ1wiLFxuICAgIFwicG5nXCI6IFwiaW1hZ2UvcG5nXCIsXG4gICAgXCJ0aWZmXCI6IFwiaW1hZ2UvdGlmZlwiLFxuICAgIFwidGlmXCI6IFwiaW1hZ2UvdGlmZlwiLFxuICAgIFwid2JtcFwiOiBcImltYWdlL3ZuZC53YXAud2JtcFwiLFxuICAgIFwiYm1wXCI6IFwiaW1hZ2UveC1tcy1ibXBcIixcbiAgICBcImljc1wiOiBcInRleHQvY2FsZW5kYXJcIixcbiAgICBcImNzdlwiOiBcInRleHQvY29tbWEtc2VwYXJhdGVkLXZhbHVlc1wiLFxuICAgIFwiY3NzXCI6IFwidGV4dC9jc3NcIixcbiAgICBcImh0bVwiOiBcInRleHQvaHRtbFwiLFxuICAgIFwiaHRtbFwiOiBcInRleHQvaHRtbFwiLFxuICAgIFwidGV4dFwiOiBcInRleHQvcGxhaW5cIixcbiAgICBcInR4dFwiOiBcInRleHQvcGxhaW5cIixcbiAgICBcImFzY1wiOiBcInRleHQvcGxhaW5cIixcbiAgICBcImRpZmZcIjogXCJ0ZXh0L3BsYWluXCIsXG4gICAgXCJwb3RcIjogXCJ0ZXh0L3BsYWluXCIsXG4gICAgXCJ2Y2ZcIjogXCJ0ZXh0L3gtdmNhcmRcIixcbiAgICBcIm1wNFwiOiBcInZpZGVvL21wNFwiLFxuICAgIFwibXBlZ1wiOiBcInZpZGVvL21wZWdcIixcbiAgICBcIm1wZ1wiOiBcInZpZGVvL21wZWdcIixcbiAgICBcIm1wZVwiOiBcInZpZGVvL21wZWdcIixcbiAgICBcIm9ndlwiOiBcInZpZGVvL29nZ1wiLFxuICAgIFwicXRcIjogXCJ2aWRlby9xdWlja3RpbWVcIixcbiAgICBcIm1vdlwiOiBcInZpZGVvL3F1aWNrdGltZVwiLFxuICAgIFwiYXZpXCI6IFwidmlkZW8veC1tc3ZpZGVvXCIsXG4gICAgXCJ6aXBcIjogXCJhcHBsaWNhdGlvbi96aXBcIixcbiAgICBcInJhclwiOiBcImFwcGxpY2F0aW9uL3gtcmFyLWNvbXByZXNzZWRcIlxufSJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/mimelib-noiconv/content-types.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/mimelib-noiconv/index.js":
/*!***********************************************!*\
  !*** ./node_modules/mimelib-noiconv/index.js ***!
  \***********************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nmodule.exports = __webpack_require__(/*! ./mime-functions */ \"(rsc)/./node_modules/mimelib-noiconv/mime-functions.js\");\nmodule.exports.contentTypes = __webpack_require__(/*! ./content-types */ \"(rsc)/./node_modules/mimelib-noiconv/content-types.js\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbWltZWxpYi1ub2ljb252L2luZGV4LmpzIiwibWFwcGluZ3MiOiI7QUFDQSxzSEFBNEM7QUFDNUMsaUlBQXdEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hhaWF1cmNvZGUvLi9ub2RlX21vZHVsZXMvbWltZWxpYi1ub2ljb252L2luZGV4LmpzP2NmNzIiXSwic291cmNlc0NvbnRlbnQiOlsiXG5tb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCIuL21pbWUtZnVuY3Rpb25zXCIpO1xubW9kdWxlLmV4cG9ydHMuY29udGVudFR5cGVzID0gcmVxdWlyZShcIi4vY29udGVudC10eXBlc1wiKTsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/mimelib-noiconv/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/mimelib-noiconv/mime-functions.js":
/*!********************************************************!*\
  !*** ./node_modules/mimelib-noiconv/mime-functions.js ***!
  \********************************************************/
/***/ (function() {

eval("\ntry{\n    // see http://github.com/bnoordhuis/node-iconv for more info\n    var Iconv = Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'iconv'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n}catch(E){\n    // convert nothing\n    Iconv = function(){}\n    Iconv.prototype.convert = function(buf){return buf;};\n}\n\n/* mime related functions - encoding/decoding etc*/\n/* TODO: Only UTF-8 and Latin1 are allowed with encodeQuotedPrintable */\n/* TODO: Check if the input string even needs encoding                */\n\n/**\n * mime.foldLine(str, maxLength, foldAnywhere) -> String\n * - str (String): mime string that might need folding\n * - maxLength (Number): max length for a line, defaults to 78\n * - foldAnywhere (Boolean): can fold at any location (ie. in base64)\n * - afterSpace (Boolean): If [true] fold after the space\n * \n * Folds a long line according to the RFC 5322\n *   <http://tools.ietf.org/html/rfc5322#section-2.1.1>\n * \n * For example:\n *     Content-Type: multipart/alternative; boundary=\"----bd_n3-lunchhour1283962663300----\"\n * will become\n *     Content-Type: multipart/alternative;\n *          boundary=\"----bd_n3-lunchhour1283962663300----\"\n * \n **/\nthis.foldLine = function(str, maxLength, foldAnywhere, afterSpace){\n    var line=false, curpos=0, response=\"\", lf;\n    maxLength = maxLength || 78;\n    \n    // return original if no need to fold\n    if(str.length<=maxLength)\n        return str;\n    \n    // read in <maxLength> bytes and try to fold it\n    while(line = str.substr(curpos, maxLength)){\n        if(!!foldAnywhere){\n            response += line;\n            if(curpos+maxLength<str.length){\n                response+=\"\\r\\n\";\n            }\n        }else{\n            lf = line.lastIndexOf(\" \");\n            if(lf<=0)\n                lf = line.lastIndexOf(\"\\t\");\n            if(line.length>=maxLength && lf>0){\n                if(!!afterSpace){\n                    // move forward until line end or no more \\s and \\t\n                    while(lf<line.length && (line.charAt(lf)==\" \" || line.charAt(lf)==\"\\t\")){\n                        lf++;\n                    }\n                }\n                response += line.substr(0,lf)+\"\\r\\n\"+(!foldAnywhere && !afterSpace && \"       \" || \"\");\n                curpos -= line.substr(lf).length;\n            }else{\n                response += line;\n                //line = line.replace(/=[a-f0-9]?$/i, \"\");\n                //response+=line + \"\\r\\n\";\n            }\n        }\n        curpos += line.length;\n    }\n    \n    // return folded string\n    return response;\n}\n\n\n/**\n * mime.encodeMimeWord(str, encoding, charset) -> String\n * - str (String): String to be encoded\n * - encoding (String): Encoding Q for quoted printable or B (def.) for base64\n * - charset (String): Charset to be used\n * \n * Encodes a string into mime encoded word format\n *   <http://en.wikipedia.org/wiki/MIME#Encoded-Word>\n *\n * For example:\n *     See on õhin test\n * Becomes with UTF-8 and Quoted-printable encoding\n *     =?UTF-8?q?See_on_=C3=B5hin_test?=\n * \n **/\nthis.encodeMimeWord = function(str, encoding, charset){\n    charset = charset || \"UTF-8\";\n    encoding = encoding && encoding.toUpperCase() || \"B\";\n    \n    if(encoding==\"Q\"){\n        str = this.encodeQuotedPrintable(str, true, charset);\n    }\n    \n    if(encoding==\"B\"){\n        str = this.encodeBase64(str);\n    }\n    \n    return \"=?\"+charset+\"?\"+encoding+\"?\"+str+\"?=\";\n}\n\n/**\n * mime.decodeMimeWord(str, encoding, charset) -> String\n * - str (String): String to be encoded\n * - encoding (String): Encoding Q for quoted printable or B (def.) for base64\n * - charset (String): Charset to be used, defaults to UTF-8\n * \n * Decodes a string from mime encoded word format, see [[encodeMimeWord]]\n * \n **/\n\nthis.decodeMimeWord = function(str){\n    var parts = str.split(\"?\"),\n        charset = parts && parts[1],\n        encoding = parts && parts[2],\n        text = parts && parts[3];\n    if(!charset || !encoding || !text)\n        return str;\n    if(encoding.toUpperCase()==\"Q\"){\n        return this.decodeQuotedPrintable(text, true, charset);\n    }\n    \n    if(encoding.toUpperCase()==\"B\"){\n        return this.decodeBase64(text);\n    }\n    \n    return text;\n}\n\n\n/**\n * mime.encodeQuotedPrintable(str, mimeWord, charset) -> String\n * - str (String): String to be encoded into Quoted-printable\n * - mimeWord (Boolean): Use mime-word mode (defaults to false)\n * - charset (String): Destination charset, defaults to UTF-8\n *   TODO: Currently only allowed charsets: UTF-8, LATIN1\n * \n * Encodes a string into Quoted-printable format. \n **/\nthis.encodeQuotedPrintable = function(str, mimeWord, charset){\n    charset = charset || \"UTF-8\";\n    \n    /*\n     * Characters from 33-126 OK (except for =; and ?_ when in mime word mode)\n     * Spaces + tabs OK (except for line beginnings and endings)  \n     * \\n + \\r OK\n     */\n    \n    str = str.replace(/(?:[\\ud800-\\udbff][\\udc00-\\udfff])|[^\\sa-zA-Z\\d]/gm,function(c){\n        if(!!mimeWord){\n            if(c==\"?\")return \"=3F\";\n            if(c==\"_\")return \"=5F\";\n        }\n        if(c!==\"=\" && c.charCodeAt(0)>=33 && c.charCodeAt(0)<=126)\n            return c;\n        return c==\"=\"?\"=3D\":(charset==\"UTF-8\"?encodeURIComponent(c):escape(c)).replace(/%/g,'=');\n    });\n    \n    str = lineEdges(str);\n\n    if(!mimeWord){\n        // lines might not be longer than 76 bytes, soft break: \"=\\r\\n\"\n        var lines = str.split(/\\r?\\n/);\n        str.replace(/(.{73}(?!\\r?\\n))/,\"$&=\\r\\n\")\n        for(var i=0, len = lines.length; i<len; i++){\n            if(lines[i].length>76){\n                lines[i] = this.foldLine(lines[i],76, false, true).replace(/\\r\\n/g,\"=\\r\\n\");\n            }\n        }\n        str = lines.join(\"\\r\\n\");\n    }else{\n        str = str.replace(/\\s/g, function(a){\n            if(a==\" \")return \"_\";\n            if(a==\"\\t\")return \"=09\";\n            return a==\"\\r\"?\"=0D\":\"=0A\";\n        });\n    }\n\n    return str;\n}\n\n/**\n * mime.deccodeQuotedPrintable(str, mimeWord, charset) -> String\n * - str (String): String to be decoded\n * - mimeWord (Boolean): Use mime-word mode (defaults to false)\n * - charset (String): Charset to be used, defaults to UTF-8\n * \n * Decodes a string from Quoted-printable format. \n **/\nthis.decodeQuotedPrintable = function(str, mimeWord, charset){\n    charset = charset && charset.toUpperCase() || \"UTF-8\";\n\n    if(mimeWord){\n        str = str.replace(/_/g,\" \");\n    }else{\n        str = str.replace(/=\\r\\n/gm,'');\n        str = str.replace(/=$/,\"\");\n    }\n    if(charset == \"UTF-8\")\n        str = decodeURIComponent(str.replace(/%/g,'%25').replace(/=/g,\"%\"));\n    else{\n        str = str.replace(/%/g,'%25').replace(/=/g,\"%\");\n        if(charset==\"ISO-8859-1\" || charset==\"LATIN1\")\n            str = unescape(str);\n        else{\n            str = decodeBytestreamUrlencoding(str);\n            str = fromCharset(charset, str);\n        }\n    }\n    return str;\n}\n\n/**\n * mime.encodeBase64(str) -> String\n * - str (String): String to be encoded into Base64\n * - charset (String): Destination charset, defaults to UTF-8\n * \n * Encodes a string into Base64 format. Base64 is mime-word safe. \n **/\nthis.encodeBase64 = function(str, charset){\n    var buffer;\n    if(charset && charset.toUpperCase()!=\"UTF-8\")\n        buffer = toCharset(charset, str);\n    else\n        buffer = new Buffer(str, \"UTF-8\");\n    return buffer.toString(\"base64\");\n}\n\n/**\n * mime.decodeBase64(str) -> String\n * - str (String): String to be decoded from Base64\n * - charset (String): Source charset, defaults to UTF-8\n * \n * Decodes a string from Base64 format. Base64 is mime-word safe.\n * NB! Always returns UTF-8 \n **/\nthis.decodeBase64 = function(str, charset){\n    var buffer = new Buffer(str, \"base64\");\n    \n    if(charset && charset.toUpperCase()!=\"UTF-8\"){\n        return fromCharset(charset, buffer);\n    }\n    \n    // defaults to utf-8\n    return buffer.toString(\"UTF-8\");\n}\n\n/**\n * mime.parseHeaders(headers) -> Array\n * - headers (String): header section of the e-mail\n * \n * Parses header lines into an array of objects (see [[parseHeaderLine]])\n * FIXME: This should probably not be here but in \"envelope\" instead\n **/\nthis.parseHeaders = function(headers){\n    var text, lines, line, i, name, value, cmd, header_lines = {};\n    // unfold\n    headers = headers.replace(/\\r?\\n([ \\t])/gm,\" \");\n\n    // split lines\n    lines = headers.split(/\\r?\\n/);\n    for(i=0; i<lines.length;i++){\n        if(!lines[i]) // no more header lines\n            break;\n        cmd = lines[i].match(/[^\\:]+/);\n        if(cmd && (cmd = cmd[0])){\n            name = cmd;\n            value = lines[i].substr(name.length+1);\n            if(!header_lines[name.toLowerCase().trim()])header_lines[name.toLowerCase().trim()] = [];\n            header_lines[name.toLowerCase()].push(value.trim());\n        }\n    }\n    \n    return header_lines;\n}\n\n/**\n * mime.parseAddresses(addresses) -> Array\n * - addresses (String): string with comma separated e-mail addresses\n * \n * Parses names and addresses from a from, to, cc or bcc line\n **/\nthis.parseAddresses = function(addresses){\n    if(!addresses)\n        return [];\n\n    addresses = addresses.replace(/\\=\\?[^?]+\\?[QqBb]\\?[^?]+\\?=/g, (function(a){return this.decodeMimeWord(a);}).bind(this));\n    \n    // not sure if it's even needed - urlencode escaped \\\\ and \\\" and \\'\n    addresses = addresses.replace(/\\\\\\\\/g,function(a){return escape(a.charAt(1));});\n    addresses = addresses.replace(/\\\\[\"']/g,function(a){return escape(a.charAt(1));});\n    \n    // find qutoed strings\n    \n    var parts = addresses.split(','), curStr,\n        curQuote, lastPos, remainder=\"\", str, list = [],\n        curAddress, address, addressArr = [], name, email, i, len;\n    var rightEnd;\n\n    // separate quoted text from text parts\n    for(i=0, len=parts.length; i<len; i++){\n        str = \"\";\n    \n        curStr = (remainder+parts[i]).trim();\n        \n        curQuote = curStr.charAt(0);\n        if(curQuote == \"'\" || curQuote == '\"'){\n            rightEnd= curStr.indexOf(\"<\");\n            if(rightEnd == -1)rightEnd= curStr.length-1;\n            lastPos = curStr.lastIndexOf(curQuote,rightEnd);\n            \n            if(!lastPos){\n                remainder = remainder+parts[i]+\",\";\n                continue;\n            }else{\n                remainder = \"\";\n                str = curStr.substring(1, lastPos).trim();\n                address = curStr.substr(lastPos+1).trim();\n            }\n            \n        }else{\n            address = curStr;\n        }\n        \n        list.push({name: str, address: address, original: curStr});\n    }\n  \n    // find e-mail addresses and user names\n    for(i=0, len=list.length; i<len; i++){\n        curAddress = list[i];\n        \n        email = false;\n        name = false;\n        \n        name = curAddress.name;\n        \n        address = curAddress.address.replace(/<([^>]+)>/, function(original, addr){\n            email = addr.indexOf(\"@\")>=0 && addr;\n            return email ? \"\" : original;\n        }).trim();\n        \n        if(!email){\n            address = address.replace(/(\\S+@\\S+)/, function(original, m){\n                email = m;\n                return email ? \"\" : original;\n            });\n        }\n        \n        if(!name){\n            if(email){\n                email = email.replace(/\\(([^)]+)\\)/,function(original, n){\n                    name = n;\n                    return \"\";\n                });\n            }\n            if(!name){\n                name = address.replace(/\"/g,\"\").trim();\n            }\n        }\n        \n        // just in case something got mixed up\n        if(!email && name.indexOf(\"@\")>=0){\n            email = name;\n            name = false;\n        }\n        \n        if(name || email){\n            name = (name || \"\").replace(/%27/g, \"'\").replace(/%22/g, \"\\\"\");\n            email = (email || \"\").replace(/%27/g, \"'\").replace(/%22/g, \"\\\"\");\n            addressArr.push({address: email, name: name});\n\n        }\n    }\n    return addressArr;\n};\n\n/**\n * mime.parseMimeWords(str) -> String\n * - str (String): string to be parsed\n * \n * Parses mime-words into UTF-8 strings\n **/\nthis.parseMimeWords = function(str){\n    return str.replace(/=\\?[^?]+\\?[QqBb]\\?[^?]+\\?=/g, (function(a){\n        return this.decodeMimeWord(a);\n    }).bind(this));\n}\n\n/**\n * mime.parseHeaderLine(line) -> Object\n * - line (String): a line from a message headers\n * \n * Parses a header line to search for additional parameters.\n * For example with \"text/plain; charset=utf-8\" the output would be\n *   - defaultValue = text/plain\n *   - charset = utf-8\n **/\nthis.parseHeaderLine = function(line){\n    if(!line)\n        return {};\n    var result = {}, parts = line.split(\";\"), pos;\n    for(var i=0, len = parts.length; i<len; i++){\n        pos = parts[i].indexOf(\"=\");\n        if(pos<0){\n            result[!i?\"defaultValue\":\"i-\"+i] = parts[i].trim();\n        }else{\n            result[parts[i].substr(0,pos).trim().toLowerCase()] = parts[i].substr(pos+1).trim();\n        }\n    }\n    return result;\n}\n\n\n/* Helper functions */\n\n/**\n * lineEdges(str) -> String\n * - str (String): String to be processed\n * \n * Replaces all spaces and tabs in the beginning and end of the string\n * with quoted printable encoded chars. Needed by [[encodeQuotedPrintable]]\n **/\nfunction lineEdges(str){\n    str = str.replace(/^[ \\t]+/gm, function(wsc){\n        return wsc.replace(/ /g,\"=20\").replace(/\\t/g,\"=09\"); \n    });\n    \n    str = str.replace(/[ \\t]+$/gm, function(wsc){\n        return wsc.replace(/ /g,\"=20\").replace(/\\t/g,\"=09\"); \n    });\n    return str;\n}\n\n/**\n * fromCharset(charset, buffer, keep_buffer) -> String | Buffer\n * - charset (String): Source charset\n * - buffer (Buffer): Buffer in <charset>\n * - keep_buffer (Boolean): If true, return buffer, otherwise UTF-8 string\n * \n * Converts a buffer in <charset> codepage into UTF-8 string\n **/\nfunction fromCharset(charset, buffer, keep_buffer){\n    var iconv = new Iconv(charset,'UTF-8'),\n        buffer = iconv.convert(buffer);\n    return keep_buffer?buffer:buffer.toString(\"utf-8\");\n}\n\n/**\n * toCharset(charset, buffer) -> Buffer\n * - charset (String): Source charset\n * - buffer (Buffer): Buffer in UTF-8 or string\n * \n * Converts a string or buffer to <charset> codepage\n **/\nfunction toCharset(charset, buffer){\n    var iconv = new Iconv('UTF-8',charset);\n    return iconv.convert(buffer);\n}\n\n/**\n * decodeBytestreamUrlencoding(encoded_string) -> Buffer\n * - encoded_string (String): String in urlencode coding\n * \n * Converts an urlencoded string into a bytestream buffer. If the used\n * charset is known the resulting string can be converted to UTF-8 with\n * [[fromCharset]]. \n * NB! For UTF-8 use decodeURIComponent and for Latin 1 decodeURL instead \n **/\nfunction decodeBytestreamUrlencoding(encoded_string){\n    var c, i, j=0, prcnts = encoded_string.match(/%/g) || \"\",\n            buffer_length = encoded_string.length - (prcnts.length*2),\n        buffer = new Buffer(buffer_length);\n\n    for(var i=0; i<encoded_string.length; i++){\n        c = encoded_string.charCodeAt(i);\n        if(c==\"37\"){ // %\n            c = parseInt(encoded_string.substr(i+1,2), 16);\n            i+=2;\n        }\n        buffer[j++] = c;\n    }\n    return buffer;\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbWltZWxpYi1ub2ljb252L21pbWUtZnVuY3Rpb25zLmpzIiwibWFwcGluZ3MiOiI7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLG9JQUFzQjtBQUN0QyxDQUFDO0FBQ0Q7QUFDQTtBQUNBLDRDQUE0QztBQUM1Qzs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsbUJBQW1CO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEI7QUFDMUI7QUFDQTtBQUNBO0FBQ0EsZ0RBQWdEO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsaUJBQWlCLHlCQUF5QjtBQUMxQztBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2NoYWlhdXJjb2RlLy4vbm9kZV9tb2R1bGVzL21pbWVsaWItbm9pY29udi9taW1lLWZ1bmN0aW9ucy5qcz9kOTMxIl0sInNvdXJjZXNDb250ZW50IjpbIlxudHJ5e1xuICAgIC8vIHNlZSBodHRwOi8vZ2l0aHViLmNvbS9ibm9vcmRodWlzL25vZGUtaWNvbnYgZm9yIG1vcmUgaW5mb1xuICAgIHZhciBJY29udiA9IHJlcXVpcmUoXCJpY29udlwiKS5JY29udjtcbn1jYXRjaChFKXtcbiAgICAvLyBjb252ZXJ0IG5vdGhpbmdcbiAgICBJY29udiA9IGZ1bmN0aW9uKCl7fVxuICAgIEljb252LnByb3RvdHlwZS5jb252ZXJ0ID0gZnVuY3Rpb24oYnVmKXtyZXR1cm4gYnVmO307XG59XG5cbi8qIG1pbWUgcmVsYXRlZCBmdW5jdGlvbnMgLSBlbmNvZGluZy9kZWNvZGluZyBldGMqL1xuLyogVE9ETzogT25seSBVVEYtOCBhbmQgTGF0aW4xIGFyZSBhbGxvd2VkIHdpdGggZW5jb2RlUXVvdGVkUHJpbnRhYmxlICovXG4vKiBUT0RPOiBDaGVjayBpZiB0aGUgaW5wdXQgc3RyaW5nIGV2ZW4gbmVlZHMgZW5jb2RpbmcgICAgICAgICAgICAgICAgKi9cblxuLyoqXG4gKiBtaW1lLmZvbGRMaW5lKHN0ciwgbWF4TGVuZ3RoLCBmb2xkQW55d2hlcmUpIC0+IFN0cmluZ1xuICogLSBzdHIgKFN0cmluZyk6IG1pbWUgc3RyaW5nIHRoYXQgbWlnaHQgbmVlZCBmb2xkaW5nXG4gKiAtIG1heExlbmd0aCAoTnVtYmVyKTogbWF4IGxlbmd0aCBmb3IgYSBsaW5lLCBkZWZhdWx0cyB0byA3OFxuICogLSBmb2xkQW55d2hlcmUgKEJvb2xlYW4pOiBjYW4gZm9sZCBhdCBhbnkgbG9jYXRpb24gKGllLiBpbiBiYXNlNjQpXG4gKiAtIGFmdGVyU3BhY2UgKEJvb2xlYW4pOiBJZiBbdHJ1ZV0gZm9sZCBhZnRlciB0aGUgc3BhY2VcbiAqIFxuICogRm9sZHMgYSBsb25nIGxpbmUgYWNjb3JkaW5nIHRvIHRoZSBSRkMgNTMyMlxuICogICA8aHR0cDovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjNTMyMiNzZWN0aW9uLTIuMS4xPlxuICogXG4gKiBGb3IgZXhhbXBsZTpcbiAqICAgICBDb250ZW50LVR5cGU6IG11bHRpcGFydC9hbHRlcm5hdGl2ZTsgYm91bmRhcnk9XCItLS0tYmRfbjMtbHVuY2hob3VyMTI4Mzk2MjY2MzMwMC0tLS1cIlxuICogd2lsbCBiZWNvbWVcbiAqICAgICBDb250ZW50LVR5cGU6IG11bHRpcGFydC9hbHRlcm5hdGl2ZTtcbiAqICAgICAgICAgIGJvdW5kYXJ5PVwiLS0tLWJkX24zLWx1bmNoaG91cjEyODM5NjI2NjMzMDAtLS0tXCJcbiAqIFxuICoqL1xudGhpcy5mb2xkTGluZSA9IGZ1bmN0aW9uKHN0ciwgbWF4TGVuZ3RoLCBmb2xkQW55d2hlcmUsIGFmdGVyU3BhY2Upe1xuICAgIHZhciBsaW5lPWZhbHNlLCBjdXJwb3M9MCwgcmVzcG9uc2U9XCJcIiwgbGY7XG4gICAgbWF4TGVuZ3RoID0gbWF4TGVuZ3RoIHx8IDc4O1xuICAgIFxuICAgIC8vIHJldHVybiBvcmlnaW5hbCBpZiBubyBuZWVkIHRvIGZvbGRcbiAgICBpZihzdHIubGVuZ3RoPD1tYXhMZW5ndGgpXG4gICAgICAgIHJldHVybiBzdHI7XG4gICAgXG4gICAgLy8gcmVhZCBpbiA8bWF4TGVuZ3RoPiBieXRlcyBhbmQgdHJ5IHRvIGZvbGQgaXRcbiAgICB3aGlsZShsaW5lID0gc3RyLnN1YnN0cihjdXJwb3MsIG1heExlbmd0aCkpe1xuICAgICAgICBpZighIWZvbGRBbnl3aGVyZSl7XG4gICAgICAgICAgICByZXNwb25zZSArPSBsaW5lO1xuICAgICAgICAgICAgaWYoY3VycG9zK21heExlbmd0aDxzdHIubGVuZ3RoKXtcbiAgICAgICAgICAgICAgICByZXNwb25zZSs9XCJcXHJcXG5cIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICBsZiA9IGxpbmUubGFzdEluZGV4T2YoXCIgXCIpO1xuICAgICAgICAgICAgaWYobGY8PTApXG4gICAgICAgICAgICAgICAgbGYgPSBsaW5lLmxhc3RJbmRleE9mKFwiXFx0XCIpO1xuICAgICAgICAgICAgaWYobGluZS5sZW5ndGg+PW1heExlbmd0aCAmJiBsZj4wKXtcbiAgICAgICAgICAgICAgICBpZighIWFmdGVyU3BhY2Upe1xuICAgICAgICAgICAgICAgICAgICAvLyBtb3ZlIGZvcndhcmQgdW50aWwgbGluZSBlbmQgb3Igbm8gbW9yZSBcXHMgYW5kIFxcdFxuICAgICAgICAgICAgICAgICAgICB3aGlsZShsZjxsaW5lLmxlbmd0aCAmJiAobGluZS5jaGFyQXQobGYpPT1cIiBcIiB8fCBsaW5lLmNoYXJBdChsZik9PVwiXFx0XCIpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxmKys7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVzcG9uc2UgKz0gbGluZS5zdWJzdHIoMCxsZikrXCJcXHJcXG5cIisoIWZvbGRBbnl3aGVyZSAmJiAhYWZ0ZXJTcGFjZSAmJiBcIiAgICAgICBcIiB8fCBcIlwiKTtcbiAgICAgICAgICAgICAgICBjdXJwb3MgLT0gbGluZS5zdWJzdHIobGYpLmxlbmd0aDtcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlICs9IGxpbmU7XG4gICAgICAgICAgICAgICAgLy9saW5lID0gbGluZS5yZXBsYWNlKC89W2EtZjAtOV0/JC9pLCBcIlwiKTtcbiAgICAgICAgICAgICAgICAvL3Jlc3BvbnNlKz1saW5lICsgXCJcXHJcXG5cIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjdXJwb3MgKz0gbGluZS5sZW5ndGg7XG4gICAgfVxuICAgIFxuICAgIC8vIHJldHVybiBmb2xkZWQgc3RyaW5nXG4gICAgcmV0dXJuIHJlc3BvbnNlO1xufVxuXG5cbi8qKlxuICogbWltZS5lbmNvZGVNaW1lV29yZChzdHIsIGVuY29kaW5nLCBjaGFyc2V0KSAtPiBTdHJpbmdcbiAqIC0gc3RyIChTdHJpbmcpOiBTdHJpbmcgdG8gYmUgZW5jb2RlZFxuICogLSBlbmNvZGluZyAoU3RyaW5nKTogRW5jb2RpbmcgUSBmb3IgcXVvdGVkIHByaW50YWJsZSBvciBCIChkZWYuKSBmb3IgYmFzZTY0XG4gKiAtIGNoYXJzZXQgKFN0cmluZyk6IENoYXJzZXQgdG8gYmUgdXNlZFxuICogXG4gKiBFbmNvZGVzIGEgc3RyaW5nIGludG8gbWltZSBlbmNvZGVkIHdvcmQgZm9ybWF0XG4gKiAgIDxodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL01JTUUjRW5jb2RlZC1Xb3JkPlxuICpcbiAqIEZvciBleGFtcGxlOlxuICogICAgIFNlZSBvbiDDtWhpbiB0ZXN0XG4gKiBCZWNvbWVzIHdpdGggVVRGLTggYW5kIFF1b3RlZC1wcmludGFibGUgZW5jb2RpbmdcbiAqICAgICA9P1VURi04P3E/U2VlX29uXz1DMz1CNWhpbl90ZXN0Pz1cbiAqIFxuICoqL1xudGhpcy5lbmNvZGVNaW1lV29yZCA9IGZ1bmN0aW9uKHN0ciwgZW5jb2RpbmcsIGNoYXJzZXQpe1xuICAgIGNoYXJzZXQgPSBjaGFyc2V0IHx8IFwiVVRGLThcIjtcbiAgICBlbmNvZGluZyA9IGVuY29kaW5nICYmIGVuY29kaW5nLnRvVXBwZXJDYXNlKCkgfHwgXCJCXCI7XG4gICAgXG4gICAgaWYoZW5jb2Rpbmc9PVwiUVwiKXtcbiAgICAgICAgc3RyID0gdGhpcy5lbmNvZGVRdW90ZWRQcmludGFibGUoc3RyLCB0cnVlLCBjaGFyc2V0KTtcbiAgICB9XG4gICAgXG4gICAgaWYoZW5jb2Rpbmc9PVwiQlwiKXtcbiAgICAgICAgc3RyID0gdGhpcy5lbmNvZGVCYXNlNjQoc3RyKTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIFwiPT9cIitjaGFyc2V0K1wiP1wiK2VuY29kaW5nK1wiP1wiK3N0citcIj89XCI7XG59XG5cbi8qKlxuICogbWltZS5kZWNvZGVNaW1lV29yZChzdHIsIGVuY29kaW5nLCBjaGFyc2V0KSAtPiBTdHJpbmdcbiAqIC0gc3RyIChTdHJpbmcpOiBTdHJpbmcgdG8gYmUgZW5jb2RlZFxuICogLSBlbmNvZGluZyAoU3RyaW5nKTogRW5jb2RpbmcgUSBmb3IgcXVvdGVkIHByaW50YWJsZSBvciBCIChkZWYuKSBmb3IgYmFzZTY0XG4gKiAtIGNoYXJzZXQgKFN0cmluZyk6IENoYXJzZXQgdG8gYmUgdXNlZCwgZGVmYXVsdHMgdG8gVVRGLThcbiAqIFxuICogRGVjb2RlcyBhIHN0cmluZyBmcm9tIG1pbWUgZW5jb2RlZCB3b3JkIGZvcm1hdCwgc2VlIFtbZW5jb2RlTWltZVdvcmRdXVxuICogXG4gKiovXG5cbnRoaXMuZGVjb2RlTWltZVdvcmQgPSBmdW5jdGlvbihzdHIpe1xuICAgIHZhciBwYXJ0cyA9IHN0ci5zcGxpdChcIj9cIiksXG4gICAgICAgIGNoYXJzZXQgPSBwYXJ0cyAmJiBwYXJ0c1sxXSxcbiAgICAgICAgZW5jb2RpbmcgPSBwYXJ0cyAmJiBwYXJ0c1syXSxcbiAgICAgICAgdGV4dCA9IHBhcnRzICYmIHBhcnRzWzNdO1xuICAgIGlmKCFjaGFyc2V0IHx8ICFlbmNvZGluZyB8fCAhdGV4dClcbiAgICAgICAgcmV0dXJuIHN0cjtcbiAgICBpZihlbmNvZGluZy50b1VwcGVyQ2FzZSgpPT1cIlFcIil7XG4gICAgICAgIHJldHVybiB0aGlzLmRlY29kZVF1b3RlZFByaW50YWJsZSh0ZXh0LCB0cnVlLCBjaGFyc2V0KTtcbiAgICB9XG4gICAgXG4gICAgaWYoZW5jb2RpbmcudG9VcHBlckNhc2UoKT09XCJCXCIpe1xuICAgICAgICByZXR1cm4gdGhpcy5kZWNvZGVCYXNlNjQodGV4dCk7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiB0ZXh0O1xufVxuXG5cbi8qKlxuICogbWltZS5lbmNvZGVRdW90ZWRQcmludGFibGUoc3RyLCBtaW1lV29yZCwgY2hhcnNldCkgLT4gU3RyaW5nXG4gKiAtIHN0ciAoU3RyaW5nKTogU3RyaW5nIHRvIGJlIGVuY29kZWQgaW50byBRdW90ZWQtcHJpbnRhYmxlXG4gKiAtIG1pbWVXb3JkIChCb29sZWFuKTogVXNlIG1pbWUtd29yZCBtb2RlIChkZWZhdWx0cyB0byBmYWxzZSlcbiAqIC0gY2hhcnNldCAoU3RyaW5nKTogRGVzdGluYXRpb24gY2hhcnNldCwgZGVmYXVsdHMgdG8gVVRGLThcbiAqICAgVE9ETzogQ3VycmVudGx5IG9ubHkgYWxsb3dlZCBjaGFyc2V0czogVVRGLTgsIExBVElOMVxuICogXG4gKiBFbmNvZGVzIGEgc3RyaW5nIGludG8gUXVvdGVkLXByaW50YWJsZSBmb3JtYXQuIFxuICoqL1xudGhpcy5lbmNvZGVRdW90ZWRQcmludGFibGUgPSBmdW5jdGlvbihzdHIsIG1pbWVXb3JkLCBjaGFyc2V0KXtcbiAgICBjaGFyc2V0ID0gY2hhcnNldCB8fCBcIlVURi04XCI7XG4gICAgXG4gICAgLypcbiAgICAgKiBDaGFyYWN0ZXJzIGZyb20gMzMtMTI2IE9LIChleGNlcHQgZm9yID07IGFuZCA/XyB3aGVuIGluIG1pbWUgd29yZCBtb2RlKVxuICAgICAqIFNwYWNlcyArIHRhYnMgT0sgKGV4Y2VwdCBmb3IgbGluZSBiZWdpbm5pbmdzIGFuZCBlbmRpbmdzKSAgXG4gICAgICogXFxuICsgXFxyIE9LXG4gICAgICovXG4gICAgXG4gICAgc3RyID0gc3RyLnJlcGxhY2UoLyg/OltcXHVkODAwLVxcdWRiZmZdW1xcdWRjMDAtXFx1ZGZmZl0pfFteXFxzYS16QS1aXFxkXS9nbSxmdW5jdGlvbihjKXtcbiAgICAgICAgaWYoISFtaW1lV29yZCl7XG4gICAgICAgICAgICBpZihjPT1cIj9cIilyZXR1cm4gXCI9M0ZcIjtcbiAgICAgICAgICAgIGlmKGM9PVwiX1wiKXJldHVybiBcIj01RlwiO1xuICAgICAgICB9XG4gICAgICAgIGlmKGMhPT1cIj1cIiAmJiBjLmNoYXJDb2RlQXQoMCk+PTMzICYmIGMuY2hhckNvZGVBdCgwKTw9MTI2KVxuICAgICAgICAgICAgcmV0dXJuIGM7XG4gICAgICAgIHJldHVybiBjPT1cIj1cIj9cIj0zRFwiOihjaGFyc2V0PT1cIlVURi04XCI/ZW5jb2RlVVJJQ29tcG9uZW50KGMpOmVzY2FwZShjKSkucmVwbGFjZSgvJS9nLCc9Jyk7XG4gICAgfSk7XG4gICAgXG4gICAgc3RyID0gbGluZUVkZ2VzKHN0cik7XG5cbiAgICBpZighbWltZVdvcmQpe1xuICAgICAgICAvLyBsaW5lcyBtaWdodCBub3QgYmUgbG9uZ2VyIHRoYW4gNzYgYnl0ZXMsIHNvZnQgYnJlYWs6IFwiPVxcclxcblwiXG4gICAgICAgIHZhciBsaW5lcyA9IHN0ci5zcGxpdCgvXFxyP1xcbi8pO1xuICAgICAgICBzdHIucmVwbGFjZSgvKC57NzN9KD8hXFxyP1xcbikpLyxcIiQmPVxcclxcblwiKVxuICAgICAgICBmb3IodmFyIGk9MCwgbGVuID0gbGluZXMubGVuZ3RoOyBpPGxlbjsgaSsrKXtcbiAgICAgICAgICAgIGlmKGxpbmVzW2ldLmxlbmd0aD43Nil7XG4gICAgICAgICAgICAgICAgbGluZXNbaV0gPSB0aGlzLmZvbGRMaW5lKGxpbmVzW2ldLDc2LCBmYWxzZSwgdHJ1ZSkucmVwbGFjZSgvXFxyXFxuL2csXCI9XFxyXFxuXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHN0ciA9IGxpbmVzLmpvaW4oXCJcXHJcXG5cIik7XG4gICAgfWVsc2V7XG4gICAgICAgIHN0ciA9IHN0ci5yZXBsYWNlKC9cXHMvZywgZnVuY3Rpb24oYSl7XG4gICAgICAgICAgICBpZihhPT1cIiBcIilyZXR1cm4gXCJfXCI7XG4gICAgICAgICAgICBpZihhPT1cIlxcdFwiKXJldHVybiBcIj0wOVwiO1xuICAgICAgICAgICAgcmV0dXJuIGE9PVwiXFxyXCI/XCI9MERcIjpcIj0wQVwiO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gc3RyO1xufVxuXG4vKipcbiAqIG1pbWUuZGVjY29kZVF1b3RlZFByaW50YWJsZShzdHIsIG1pbWVXb3JkLCBjaGFyc2V0KSAtPiBTdHJpbmdcbiAqIC0gc3RyIChTdHJpbmcpOiBTdHJpbmcgdG8gYmUgZGVjb2RlZFxuICogLSBtaW1lV29yZCAoQm9vbGVhbik6IFVzZSBtaW1lLXdvcmQgbW9kZSAoZGVmYXVsdHMgdG8gZmFsc2UpXG4gKiAtIGNoYXJzZXQgKFN0cmluZyk6IENoYXJzZXQgdG8gYmUgdXNlZCwgZGVmYXVsdHMgdG8gVVRGLThcbiAqIFxuICogRGVjb2RlcyBhIHN0cmluZyBmcm9tIFF1b3RlZC1wcmludGFibGUgZm9ybWF0LiBcbiAqKi9cbnRoaXMuZGVjb2RlUXVvdGVkUHJpbnRhYmxlID0gZnVuY3Rpb24oc3RyLCBtaW1lV29yZCwgY2hhcnNldCl7XG4gICAgY2hhcnNldCA9IGNoYXJzZXQgJiYgY2hhcnNldC50b1VwcGVyQ2FzZSgpIHx8IFwiVVRGLThcIjtcblxuICAgIGlmKG1pbWVXb3JkKXtcbiAgICAgICAgc3RyID0gc3RyLnJlcGxhY2UoL18vZyxcIiBcIik7XG4gICAgfWVsc2V7XG4gICAgICAgIHN0ciA9IHN0ci5yZXBsYWNlKC89XFxyXFxuL2dtLCcnKTtcbiAgICAgICAgc3RyID0gc3RyLnJlcGxhY2UoLz0kLyxcIlwiKTtcbiAgICB9XG4gICAgaWYoY2hhcnNldCA9PSBcIlVURi04XCIpXG4gICAgICAgIHN0ciA9IGRlY29kZVVSSUNvbXBvbmVudChzdHIucmVwbGFjZSgvJS9nLCclMjUnKS5yZXBsYWNlKC89L2csXCIlXCIpKTtcbiAgICBlbHNle1xuICAgICAgICBzdHIgPSBzdHIucmVwbGFjZSgvJS9nLCclMjUnKS5yZXBsYWNlKC89L2csXCIlXCIpO1xuICAgICAgICBpZihjaGFyc2V0PT1cIklTTy04ODU5LTFcIiB8fCBjaGFyc2V0PT1cIkxBVElOMVwiKVxuICAgICAgICAgICAgc3RyID0gdW5lc2NhcGUoc3RyKTtcbiAgICAgICAgZWxzZXtcbiAgICAgICAgICAgIHN0ciA9IGRlY29kZUJ5dGVzdHJlYW1VcmxlbmNvZGluZyhzdHIpO1xuICAgICAgICAgICAgc3RyID0gZnJvbUNoYXJzZXQoY2hhcnNldCwgc3RyKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc3RyO1xufVxuXG4vKipcbiAqIG1pbWUuZW5jb2RlQmFzZTY0KHN0cikgLT4gU3RyaW5nXG4gKiAtIHN0ciAoU3RyaW5nKTogU3RyaW5nIHRvIGJlIGVuY29kZWQgaW50byBCYXNlNjRcbiAqIC0gY2hhcnNldCAoU3RyaW5nKTogRGVzdGluYXRpb24gY2hhcnNldCwgZGVmYXVsdHMgdG8gVVRGLThcbiAqIFxuICogRW5jb2RlcyBhIHN0cmluZyBpbnRvIEJhc2U2NCBmb3JtYXQuIEJhc2U2NCBpcyBtaW1lLXdvcmQgc2FmZS4gXG4gKiovXG50aGlzLmVuY29kZUJhc2U2NCA9IGZ1bmN0aW9uKHN0ciwgY2hhcnNldCl7XG4gICAgdmFyIGJ1ZmZlcjtcbiAgICBpZihjaGFyc2V0ICYmIGNoYXJzZXQudG9VcHBlckNhc2UoKSE9XCJVVEYtOFwiKVxuICAgICAgICBidWZmZXIgPSB0b0NoYXJzZXQoY2hhcnNldCwgc3RyKTtcbiAgICBlbHNlXG4gICAgICAgIGJ1ZmZlciA9IG5ldyBCdWZmZXIoc3RyLCBcIlVURi04XCIpO1xuICAgIHJldHVybiBidWZmZXIudG9TdHJpbmcoXCJiYXNlNjRcIik7XG59XG5cbi8qKlxuICogbWltZS5kZWNvZGVCYXNlNjQoc3RyKSAtPiBTdHJpbmdcbiAqIC0gc3RyIChTdHJpbmcpOiBTdHJpbmcgdG8gYmUgZGVjb2RlZCBmcm9tIEJhc2U2NFxuICogLSBjaGFyc2V0IChTdHJpbmcpOiBTb3VyY2UgY2hhcnNldCwgZGVmYXVsdHMgdG8gVVRGLThcbiAqIFxuICogRGVjb2RlcyBhIHN0cmluZyBmcm9tIEJhc2U2NCBmb3JtYXQuIEJhc2U2NCBpcyBtaW1lLXdvcmQgc2FmZS5cbiAqIE5CISBBbHdheXMgcmV0dXJucyBVVEYtOCBcbiAqKi9cbnRoaXMuZGVjb2RlQmFzZTY0ID0gZnVuY3Rpb24oc3RyLCBjaGFyc2V0KXtcbiAgICB2YXIgYnVmZmVyID0gbmV3IEJ1ZmZlcihzdHIsIFwiYmFzZTY0XCIpO1xuICAgIFxuICAgIGlmKGNoYXJzZXQgJiYgY2hhcnNldC50b1VwcGVyQ2FzZSgpIT1cIlVURi04XCIpe1xuICAgICAgICByZXR1cm4gZnJvbUNoYXJzZXQoY2hhcnNldCwgYnVmZmVyKTtcbiAgICB9XG4gICAgXG4gICAgLy8gZGVmYXVsdHMgdG8gdXRmLThcbiAgICByZXR1cm4gYnVmZmVyLnRvU3RyaW5nKFwiVVRGLThcIik7XG59XG5cbi8qKlxuICogbWltZS5wYXJzZUhlYWRlcnMoaGVhZGVycykgLT4gQXJyYXlcbiAqIC0gaGVhZGVycyAoU3RyaW5nKTogaGVhZGVyIHNlY3Rpb24gb2YgdGhlIGUtbWFpbFxuICogXG4gKiBQYXJzZXMgaGVhZGVyIGxpbmVzIGludG8gYW4gYXJyYXkgb2Ygb2JqZWN0cyAoc2VlIFtbcGFyc2VIZWFkZXJMaW5lXV0pXG4gKiBGSVhNRTogVGhpcyBzaG91bGQgcHJvYmFibHkgbm90IGJlIGhlcmUgYnV0IGluIFwiZW52ZWxvcGVcIiBpbnN0ZWFkXG4gKiovXG50aGlzLnBhcnNlSGVhZGVycyA9IGZ1bmN0aW9uKGhlYWRlcnMpe1xuICAgIHZhciB0ZXh0LCBsaW5lcywgbGluZSwgaSwgbmFtZSwgdmFsdWUsIGNtZCwgaGVhZGVyX2xpbmVzID0ge307XG4gICAgLy8gdW5mb2xkXG4gICAgaGVhZGVycyA9IGhlYWRlcnMucmVwbGFjZSgvXFxyP1xcbihbIFxcdF0pL2dtLFwiIFwiKTtcblxuICAgIC8vIHNwbGl0IGxpbmVzXG4gICAgbGluZXMgPSBoZWFkZXJzLnNwbGl0KC9cXHI/XFxuLyk7XG4gICAgZm9yKGk9MDsgaTxsaW5lcy5sZW5ndGg7aSsrKXtcbiAgICAgICAgaWYoIWxpbmVzW2ldKSAvLyBubyBtb3JlIGhlYWRlciBsaW5lc1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNtZCA9IGxpbmVzW2ldLm1hdGNoKC9bXlxcOl0rLyk7XG4gICAgICAgIGlmKGNtZCAmJiAoY21kID0gY21kWzBdKSl7XG4gICAgICAgICAgICBuYW1lID0gY21kO1xuICAgICAgICAgICAgdmFsdWUgPSBsaW5lc1tpXS5zdWJzdHIobmFtZS5sZW5ndGgrMSk7XG4gICAgICAgICAgICBpZighaGVhZGVyX2xpbmVzW25hbWUudG9Mb3dlckNhc2UoKS50cmltKCldKWhlYWRlcl9saW5lc1tuYW1lLnRvTG93ZXJDYXNlKCkudHJpbSgpXSA9IFtdO1xuICAgICAgICAgICAgaGVhZGVyX2xpbmVzW25hbWUudG9Mb3dlckNhc2UoKV0ucHVzaCh2YWx1ZS50cmltKCkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBoZWFkZXJfbGluZXM7XG59XG5cbi8qKlxuICogbWltZS5wYXJzZUFkZHJlc3NlcyhhZGRyZXNzZXMpIC0+IEFycmF5XG4gKiAtIGFkZHJlc3NlcyAoU3RyaW5nKTogc3RyaW5nIHdpdGggY29tbWEgc2VwYXJhdGVkIGUtbWFpbCBhZGRyZXNzZXNcbiAqIFxuICogUGFyc2VzIG5hbWVzIGFuZCBhZGRyZXNzZXMgZnJvbSBhIGZyb20sIHRvLCBjYyBvciBiY2MgbGluZVxuICoqL1xudGhpcy5wYXJzZUFkZHJlc3NlcyA9IGZ1bmN0aW9uKGFkZHJlc3Nlcyl7XG4gICAgaWYoIWFkZHJlc3NlcylcbiAgICAgICAgcmV0dXJuIFtdO1xuXG4gICAgYWRkcmVzc2VzID0gYWRkcmVzc2VzLnJlcGxhY2UoL1xcPVxcP1teP10rXFw/W1FxQmJdXFw/W14/XStcXD89L2csIChmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5kZWNvZGVNaW1lV29yZChhKTt9KS5iaW5kKHRoaXMpKTtcbiAgICBcbiAgICAvLyBub3Qgc3VyZSBpZiBpdCdzIGV2ZW4gbmVlZGVkIC0gdXJsZW5jb2RlIGVzY2FwZWQgXFxcXCBhbmQgXFxcIiBhbmQgXFwnXG4gICAgYWRkcmVzc2VzID0gYWRkcmVzc2VzLnJlcGxhY2UoL1xcXFxcXFxcL2csZnVuY3Rpb24oYSl7cmV0dXJuIGVzY2FwZShhLmNoYXJBdCgxKSk7fSk7XG4gICAgYWRkcmVzc2VzID0gYWRkcmVzc2VzLnJlcGxhY2UoL1xcXFxbXCInXS9nLGZ1bmN0aW9uKGEpe3JldHVybiBlc2NhcGUoYS5jaGFyQXQoMSkpO30pO1xuICAgIFxuICAgIC8vIGZpbmQgcXV0b2VkIHN0cmluZ3NcbiAgICBcbiAgICB2YXIgcGFydHMgPSBhZGRyZXNzZXMuc3BsaXQoJywnKSwgY3VyU3RyLFxuICAgICAgICBjdXJRdW90ZSwgbGFzdFBvcywgcmVtYWluZGVyPVwiXCIsIHN0ciwgbGlzdCA9IFtdLFxuICAgICAgICBjdXJBZGRyZXNzLCBhZGRyZXNzLCBhZGRyZXNzQXJyID0gW10sIG5hbWUsIGVtYWlsLCBpLCBsZW47XG4gICAgdmFyIHJpZ2h0RW5kO1xuXG4gICAgLy8gc2VwYXJhdGUgcXVvdGVkIHRleHQgZnJvbSB0ZXh0IHBhcnRzXG4gICAgZm9yKGk9MCwgbGVuPXBhcnRzLmxlbmd0aDsgaTxsZW47IGkrKyl7XG4gICAgICAgIHN0ciA9IFwiXCI7XG4gICAgXG4gICAgICAgIGN1clN0ciA9IChyZW1haW5kZXIrcGFydHNbaV0pLnRyaW0oKTtcbiAgICAgICAgXG4gICAgICAgIGN1clF1b3RlID0gY3VyU3RyLmNoYXJBdCgwKTtcbiAgICAgICAgaWYoY3VyUXVvdGUgPT0gXCInXCIgfHwgY3VyUXVvdGUgPT0gJ1wiJyl7XG4gICAgICAgICAgICByaWdodEVuZD0gY3VyU3RyLmluZGV4T2YoXCI8XCIpO1xuICAgICAgICAgICAgaWYocmlnaHRFbmQgPT0gLTEpcmlnaHRFbmQ9IGN1clN0ci5sZW5ndGgtMTtcbiAgICAgICAgICAgIGxhc3RQb3MgPSBjdXJTdHIubGFzdEluZGV4T2YoY3VyUXVvdGUscmlnaHRFbmQpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZighbGFzdFBvcyl7XG4gICAgICAgICAgICAgICAgcmVtYWluZGVyID0gcmVtYWluZGVyK3BhcnRzW2ldK1wiLFwiO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgcmVtYWluZGVyID0gXCJcIjtcbiAgICAgICAgICAgICAgICBzdHIgPSBjdXJTdHIuc3Vic3RyaW5nKDEsIGxhc3RQb3MpLnRyaW0oKTtcbiAgICAgICAgICAgICAgICBhZGRyZXNzID0gY3VyU3RyLnN1YnN0cihsYXN0UG9zKzEpLnRyaW0oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIGFkZHJlc3MgPSBjdXJTdHI7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGxpc3QucHVzaCh7bmFtZTogc3RyLCBhZGRyZXNzOiBhZGRyZXNzLCBvcmlnaW5hbDogY3VyU3RyfSk7XG4gICAgfVxuICBcbiAgICAvLyBmaW5kIGUtbWFpbCBhZGRyZXNzZXMgYW5kIHVzZXIgbmFtZXNcbiAgICBmb3IoaT0wLCBsZW49bGlzdC5sZW5ndGg7IGk8bGVuOyBpKyspe1xuICAgICAgICBjdXJBZGRyZXNzID0gbGlzdFtpXTtcbiAgICAgICAgXG4gICAgICAgIGVtYWlsID0gZmFsc2U7XG4gICAgICAgIG5hbWUgPSBmYWxzZTtcbiAgICAgICAgXG4gICAgICAgIG5hbWUgPSBjdXJBZGRyZXNzLm5hbWU7XG4gICAgICAgIFxuICAgICAgICBhZGRyZXNzID0gY3VyQWRkcmVzcy5hZGRyZXNzLnJlcGxhY2UoLzwoW14+XSspPi8sIGZ1bmN0aW9uKG9yaWdpbmFsLCBhZGRyKXtcbiAgICAgICAgICAgIGVtYWlsID0gYWRkci5pbmRleE9mKFwiQFwiKT49MCAmJiBhZGRyO1xuICAgICAgICAgICAgcmV0dXJuIGVtYWlsID8gXCJcIiA6IG9yaWdpbmFsO1xuICAgICAgICB9KS50cmltKCk7XG4gICAgICAgIFxuICAgICAgICBpZighZW1haWwpe1xuICAgICAgICAgICAgYWRkcmVzcyA9IGFkZHJlc3MucmVwbGFjZSgvKFxcUytAXFxTKykvLCBmdW5jdGlvbihvcmlnaW5hbCwgbSl7XG4gICAgICAgICAgICAgICAgZW1haWwgPSBtO1xuICAgICAgICAgICAgICAgIHJldHVybiBlbWFpbCA/IFwiXCIgOiBvcmlnaW5hbDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZighbmFtZSl7XG4gICAgICAgICAgICBpZihlbWFpbCl7XG4gICAgICAgICAgICAgICAgZW1haWwgPSBlbWFpbC5yZXBsYWNlKC9cXCgoW14pXSspXFwpLyxmdW5jdGlvbihvcmlnaW5hbCwgbil7XG4gICAgICAgICAgICAgICAgICAgIG5hbWUgPSBuO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJcIjtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKCFuYW1lKXtcbiAgICAgICAgICAgICAgICBuYW1lID0gYWRkcmVzcy5yZXBsYWNlKC9cIi9nLFwiXCIpLnRyaW0oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8ganVzdCBpbiBjYXNlIHNvbWV0aGluZyBnb3QgbWl4ZWQgdXBcbiAgICAgICAgaWYoIWVtYWlsICYmIG5hbWUuaW5kZXhPZihcIkBcIik+PTApe1xuICAgICAgICAgICAgZW1haWwgPSBuYW1lO1xuICAgICAgICAgICAgbmFtZSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZihuYW1lIHx8IGVtYWlsKXtcbiAgICAgICAgICAgIG5hbWUgPSAobmFtZSB8fCBcIlwiKS5yZXBsYWNlKC8lMjcvZywgXCInXCIpLnJlcGxhY2UoLyUyMi9nLCBcIlxcXCJcIik7XG4gICAgICAgICAgICBlbWFpbCA9IChlbWFpbCB8fCBcIlwiKS5yZXBsYWNlKC8lMjcvZywgXCInXCIpLnJlcGxhY2UoLyUyMi9nLCBcIlxcXCJcIik7XG4gICAgICAgICAgICBhZGRyZXNzQXJyLnB1c2goe2FkZHJlc3M6IGVtYWlsLCBuYW1lOiBuYW1lfSk7XG5cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYWRkcmVzc0Fycjtcbn07XG5cbi8qKlxuICogbWltZS5wYXJzZU1pbWVXb3JkcyhzdHIpIC0+IFN0cmluZ1xuICogLSBzdHIgKFN0cmluZyk6IHN0cmluZyB0byBiZSBwYXJzZWRcbiAqIFxuICogUGFyc2VzIG1pbWUtd29yZHMgaW50byBVVEYtOCBzdHJpbmdzXG4gKiovXG50aGlzLnBhcnNlTWltZVdvcmRzID0gZnVuY3Rpb24oc3RyKXtcbiAgICByZXR1cm4gc3RyLnJlcGxhY2UoLz1cXD9bXj9dK1xcP1tRcUJiXVxcP1teP10rXFw/PS9nLCAoZnVuY3Rpb24oYSl7XG4gICAgICAgIHJldHVybiB0aGlzLmRlY29kZU1pbWVXb3JkKGEpO1xuICAgIH0pLmJpbmQodGhpcykpO1xufVxuXG4vKipcbiAqIG1pbWUucGFyc2VIZWFkZXJMaW5lKGxpbmUpIC0+IE9iamVjdFxuICogLSBsaW5lIChTdHJpbmcpOiBhIGxpbmUgZnJvbSBhIG1lc3NhZ2UgaGVhZGVyc1xuICogXG4gKiBQYXJzZXMgYSBoZWFkZXIgbGluZSB0byBzZWFyY2ggZm9yIGFkZGl0aW9uYWwgcGFyYW1ldGVycy5cbiAqIEZvciBleGFtcGxlIHdpdGggXCJ0ZXh0L3BsYWluOyBjaGFyc2V0PXV0Zi04XCIgdGhlIG91dHB1dCB3b3VsZCBiZVxuICogICAtIGRlZmF1bHRWYWx1ZSA9IHRleHQvcGxhaW5cbiAqICAgLSBjaGFyc2V0ID0gdXRmLThcbiAqKi9cbnRoaXMucGFyc2VIZWFkZXJMaW5lID0gZnVuY3Rpb24obGluZSl7XG4gICAgaWYoIWxpbmUpXG4gICAgICAgIHJldHVybiB7fTtcbiAgICB2YXIgcmVzdWx0ID0ge30sIHBhcnRzID0gbGluZS5zcGxpdChcIjtcIiksIHBvcztcbiAgICBmb3IodmFyIGk9MCwgbGVuID0gcGFydHMubGVuZ3RoOyBpPGxlbjsgaSsrKXtcbiAgICAgICAgcG9zID0gcGFydHNbaV0uaW5kZXhPZihcIj1cIik7XG4gICAgICAgIGlmKHBvczwwKXtcbiAgICAgICAgICAgIHJlc3VsdFshaT9cImRlZmF1bHRWYWx1ZVwiOlwiaS1cIitpXSA9IHBhcnRzW2ldLnRyaW0oKTtcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICByZXN1bHRbcGFydHNbaV0uc3Vic3RyKDAscG9zKS50cmltKCkudG9Mb3dlckNhc2UoKV0gPSBwYXJ0c1tpXS5zdWJzdHIocG9zKzEpLnRyaW0oKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuXG5cbi8qIEhlbHBlciBmdW5jdGlvbnMgKi9cblxuLyoqXG4gKiBsaW5lRWRnZXMoc3RyKSAtPiBTdHJpbmdcbiAqIC0gc3RyIChTdHJpbmcpOiBTdHJpbmcgdG8gYmUgcHJvY2Vzc2VkXG4gKiBcbiAqIFJlcGxhY2VzIGFsbCBzcGFjZXMgYW5kIHRhYnMgaW4gdGhlIGJlZ2lubmluZyBhbmQgZW5kIG9mIHRoZSBzdHJpbmdcbiAqIHdpdGggcXVvdGVkIHByaW50YWJsZSBlbmNvZGVkIGNoYXJzLiBOZWVkZWQgYnkgW1tlbmNvZGVRdW90ZWRQcmludGFibGVdXVxuICoqL1xuZnVuY3Rpb24gbGluZUVkZ2VzKHN0cil7XG4gICAgc3RyID0gc3RyLnJlcGxhY2UoL15bIFxcdF0rL2dtLCBmdW5jdGlvbih3c2Mpe1xuICAgICAgICByZXR1cm4gd3NjLnJlcGxhY2UoLyAvZyxcIj0yMFwiKS5yZXBsYWNlKC9cXHQvZyxcIj0wOVwiKTsgXG4gICAgfSk7XG4gICAgXG4gICAgc3RyID0gc3RyLnJlcGxhY2UoL1sgXFx0XSskL2dtLCBmdW5jdGlvbih3c2Mpe1xuICAgICAgICByZXR1cm4gd3NjLnJlcGxhY2UoLyAvZyxcIj0yMFwiKS5yZXBsYWNlKC9cXHQvZyxcIj0wOVwiKTsgXG4gICAgfSk7XG4gICAgcmV0dXJuIHN0cjtcbn1cblxuLyoqXG4gKiBmcm9tQ2hhcnNldChjaGFyc2V0LCBidWZmZXIsIGtlZXBfYnVmZmVyKSAtPiBTdHJpbmcgfCBCdWZmZXJcbiAqIC0gY2hhcnNldCAoU3RyaW5nKTogU291cmNlIGNoYXJzZXRcbiAqIC0gYnVmZmVyIChCdWZmZXIpOiBCdWZmZXIgaW4gPGNoYXJzZXQ+XG4gKiAtIGtlZXBfYnVmZmVyIChCb29sZWFuKTogSWYgdHJ1ZSwgcmV0dXJuIGJ1ZmZlciwgb3RoZXJ3aXNlIFVURi04IHN0cmluZ1xuICogXG4gKiBDb252ZXJ0cyBhIGJ1ZmZlciBpbiA8Y2hhcnNldD4gY29kZXBhZ2UgaW50byBVVEYtOCBzdHJpbmdcbiAqKi9cbmZ1bmN0aW9uIGZyb21DaGFyc2V0KGNoYXJzZXQsIGJ1ZmZlciwga2VlcF9idWZmZXIpe1xuICAgIHZhciBpY29udiA9IG5ldyBJY29udihjaGFyc2V0LCdVVEYtOCcpLFxuICAgICAgICBidWZmZXIgPSBpY29udi5jb252ZXJ0KGJ1ZmZlcik7XG4gICAgcmV0dXJuIGtlZXBfYnVmZmVyP2J1ZmZlcjpidWZmZXIudG9TdHJpbmcoXCJ1dGYtOFwiKTtcbn1cblxuLyoqXG4gKiB0b0NoYXJzZXQoY2hhcnNldCwgYnVmZmVyKSAtPiBCdWZmZXJcbiAqIC0gY2hhcnNldCAoU3RyaW5nKTogU291cmNlIGNoYXJzZXRcbiAqIC0gYnVmZmVyIChCdWZmZXIpOiBCdWZmZXIgaW4gVVRGLTggb3Igc3RyaW5nXG4gKiBcbiAqIENvbnZlcnRzIGEgc3RyaW5nIG9yIGJ1ZmZlciB0byA8Y2hhcnNldD4gY29kZXBhZ2VcbiAqKi9cbmZ1bmN0aW9uIHRvQ2hhcnNldChjaGFyc2V0LCBidWZmZXIpe1xuICAgIHZhciBpY29udiA9IG5ldyBJY29udignVVRGLTgnLGNoYXJzZXQpO1xuICAgIHJldHVybiBpY29udi5jb252ZXJ0KGJ1ZmZlcik7XG59XG5cbi8qKlxuICogZGVjb2RlQnl0ZXN0cmVhbVVybGVuY29kaW5nKGVuY29kZWRfc3RyaW5nKSAtPiBCdWZmZXJcbiAqIC0gZW5jb2RlZF9zdHJpbmcgKFN0cmluZyk6IFN0cmluZyBpbiB1cmxlbmNvZGUgY29kaW5nXG4gKiBcbiAqIENvbnZlcnRzIGFuIHVybGVuY29kZWQgc3RyaW5nIGludG8gYSBieXRlc3RyZWFtIGJ1ZmZlci4gSWYgdGhlIHVzZWRcbiAqIGNoYXJzZXQgaXMga25vd24gdGhlIHJlc3VsdGluZyBzdHJpbmcgY2FuIGJlIGNvbnZlcnRlZCB0byBVVEYtOCB3aXRoXG4gKiBbW2Zyb21DaGFyc2V0XV0uIFxuICogTkIhIEZvciBVVEYtOCB1c2UgZGVjb2RlVVJJQ29tcG9uZW50IGFuZCBmb3IgTGF0aW4gMSBkZWNvZGVVUkwgaW5zdGVhZCBcbiAqKi9cbmZ1bmN0aW9uIGRlY29kZUJ5dGVzdHJlYW1VcmxlbmNvZGluZyhlbmNvZGVkX3N0cmluZyl7XG4gICAgdmFyIGMsIGksIGo9MCwgcHJjbnRzID0gZW5jb2RlZF9zdHJpbmcubWF0Y2goLyUvZykgfHwgXCJcIixcbiAgICAgICAgICAgIGJ1ZmZlcl9sZW5ndGggPSBlbmNvZGVkX3N0cmluZy5sZW5ndGggLSAocHJjbnRzLmxlbmd0aCoyKSxcbiAgICAgICAgYnVmZmVyID0gbmV3IEJ1ZmZlcihidWZmZXJfbGVuZ3RoKTtcblxuICAgIGZvcih2YXIgaT0wOyBpPGVuY29kZWRfc3RyaW5nLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgYyA9IGVuY29kZWRfc3RyaW5nLmNoYXJDb2RlQXQoaSk7XG4gICAgICAgIGlmKGM9PVwiMzdcIil7IC8vICVcbiAgICAgICAgICAgIGMgPSBwYXJzZUludChlbmNvZGVkX3N0cmluZy5zdWJzdHIoaSsxLDIpLCAxNik7XG4gICAgICAgICAgICBpKz0yO1xuICAgICAgICB9XG4gICAgICAgIGJ1ZmZlcltqKytdID0gYztcbiAgICB9XG4gICAgcmV0dXJuIGJ1ZmZlcjtcbn1cblxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/mimelib-noiconv/mime-functions.js\n");

/***/ })

};
;